---
title: "Characteristics_of_HTCs"
author: "Jesse Warren"
date: "4/4/2020"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)
library(tidyverse)
library(tidycensus)
library(tigris)
options(tigris_use_cache = TRUE)
```


```{r Load ACS variables used as proxy measures of HTC communities, cache=TRUE}
#WA HTC community list from Census Bureau:
  # Recent Immigrants
  # Refugees
  # Rural
  # Homeless
  # Anti-government 
  # Seniors
  # African-American
  # American Indian/Alaska Native
  # Asian-American (Chinese)
  # Asian-American (Filipino)
  # Asian-American (Indian/Sub Continent)
  # Asian-American (Korean)
  # Asian-American (Vietnamese)
  # Children (younger than 5)
  # Disabled
  # College Students
  # Faith-Based Community
  # Hispanic/ Latino
  # Renters/Highly Mobile
  # LGBTQ
  # Middle-eastern North African MENA
  # Migrant Workers
  # Military/ Veterans
  # Pacific Islander
  # Russian 

#load ACS census variables
#load variable list
vlist <- load_variables(2018, "acs5", cache = TRUE)



#load ACS city population data
ACS_variables_raw <- get_acs(geography = "tract",
                             variables = c(total_pop = "B03002_001",
                                           black_pop = "B03002_004",
                                           unweighted_sample_count_of_pop = "B00001_001"),
                             state = "WA",
                             year = 2018,
                             geometry = TRUE,
                             output = "wide")

```


```{r Clean ACS data}
#select only necessary variables
ACS_variables_clean <- ACS_variables_raw %>% 
  select(-black_popM, -total_popM)
```


```{r Analyze individual HTCs}
#calculate pct figures
ACS_variables_clean <- ACS_variables_clean %>% 
  mutate(pct_black = black_popE / total_popE)
```


```{r Aggregate HTCs}

```


```{r Create maps}
ACS_variables_clean %>%
  ggplot(aes(fill = pct_black)) + 
  geom_sf(color = NA) + 
  scale_fill_viridis_c(option = "viridis") 




```

```{r Test Mapview package}
library(mapview)

mapview(ACS_variables_clean, zcol = "pct_black")


```

